
# 1. 테이크 오버를 자동화

+ GKE에서는 정지한 노드를 대신해 다른 노드를 기동시켜 자기 회복 한다.

+ 온프레미스에서 구성한 경우에도 노드가 장애로 정지했을 때 파드를 빠르게 다른 노드로 옮겨서 서비스를 재개하고 싶을 것이다.

+ 온프레미스 환겨에서 정지한 노드를 클러스터에서 자동으로 제외해 해당 노드에서 실행되던 파드를 다른 노드로 옮겨 서버스가 재개될 수 있도록 할 것이다.

![자동 테이크오버](https://user-images.githubusercontent.com/42735894/143897790-4890c965-e6aa-4c5d-930e-b6e9421347d3.PNG)

----

# 2. 기능 구현에 고려해야할 점

### (1) K8s API 라이브러리를 사용하여 프로그램 개발
kubectl을 사용하지 않으며, 파드상의 컨테이너에서 돌아가는 프로그램에서 K8s API를 직접 호출하여 K8s 클러스터의 상태 변화에 대한 처리를 자동화한다.
<br>

### (2) K8s 클러스터에 대한 조작 권한을 파드에 부여
+ kubectl의 마스터에 접속하기 위해서는 인증 정보(KUBECONFIG)가 필요하다

+ 마찬가지로 파드상의 컨테이너가 K8s 클러스터를 조작하기 위해서는 권한 부여가 필용하다
<br>

### (3) 네임스페이스 분리
+ 애플리케이션용 파드와 시스템을 위한 파드는 담당자나 책임 부서가 다르기 마련이다.

+ 쿠버네티스의 네임스페이스는 관리 범위를 명확하게 분리하는 수단으로 적합하며, 여기서 개발하는 파드는 전용 네임스페이스로 배포할 것이다.
<br>

### (4) K8s 클러스터의 구성 변동에 자동 대응
+ 이 자동화 컨테이너는 노드의 정지/추가/변동에 대응해야 한다.

+ 여기서는 쿠버네티스의 데몬셋 컨트롤러를 사용하여 파드를 기동할 것이다.